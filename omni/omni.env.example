# Omni Environment Configuration
# Copy to omni.env and fill in actual values

# =============================================================================
# Host Configuration
# =============================================================================
# LAN IP where Omni will bind ports (must be reachable by Talos VMs)
# Holly: 192.168.10.20
HOST_IP=192.168.10.20

# =============================================================================
# Omni Version & Identity
# =============================================================================
OMNI_IMG_TAG=v1.4.6
OMNI_ACCOUNT_UUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
NAME=omni
EVENT_SINK_PORT=8091

# =============================================================================
# Keys and Certificates
# =============================================================================
# TLS certificates (Let's Encrypt or self-signed)
TLS_CERT=/etc/letsencrypt/live/omni.spaceships.work/fullchain.pem
TLS_KEY=/etc/letsencrypt/live/omni.spaceships.work/privkey.pem

# etcd storage and encryption
ETCD_VOLUME_PATH=/etc/etcd/
ETCD_ENCRYPTION_KEY=/path/to/omni.asc

# SQLite database path (CRITICAL for v1.4+)
OMNI_SQLITE_PATH=/_out/etcd/omni.db

# =============================================================================
# Network Binding
# =============================================================================
BIND_ADDR=0.0.0.0:443
MACHINE_API_BIND_ADDR=0.0.0.0:8090
K8S_PROXY_BIND_ADDR=0.0.0.0:8100

# =============================================================================
# Advertised URLs
# =============================================================================
# External access (via Tailscale) - Browser/UI
ADVERTISED_API_URL="https://omni.spaceships.work"
ADVERTISED_K8S_PROXY_URL="https://omni.spaceships.work:8100/"

# Internal access (LAN) - Talos Nodes via SideroLink
# Use the LAN IP where Omni is reachable by Talos VMs
SIDEROLINK_ADVERTISED_API_URL="https://omni.spaceships.work:8090/"
SIDEROLINK_WIREGUARD_ADVERTISED_ADDR="192.168.10.20:50180"

# =============================================================================
# Authentication
# =============================================================================
# Initial admin user(s) - comma-separated email addresses
INITIAL_USER_EMAILS="admin@example.com"

# Auth0 OIDC configuration
# Create application at: https://manage.auth0.com/
# Application type: Single Page Application
# Allowed callbacks: https://omni.spaceships.work/
AUTH='--auth-auth0-enabled=true --auth-auth0-domain=YOUR_TENANT.us.auth0.com --auth-auth0-client-id=YOUR_CLIENT_ID'

# =============================================================================
# Tailscale
# =============================================================================
# Generate auth key at: https://login.tailscale.com/admin/settings/keys
# Use reusable, ephemeral key with appropriate tags
TS_AUTHKEY="tskey-auth-XXXXXXXXXXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
